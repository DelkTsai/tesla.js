{{> header}}

<span id="home"></span>

<section class="hero">
	<img src="img/logo-big.png" alt="Tesla - a powerful web framework for Node.js" class="hero-img">
</section>

{{> navigation}}

<section class="content">

{{> docLinks}}

<h1 id="about">Tesla.js</h1>

<p>Tesla is a modern MVC style framework built on to of <a href="http://nodejs.org/">Node.js</a> and <a href="http://expressjs.com/">Express</a>. It's designed to be as flexible as possible, and includes sane default and boilerplates to get your site up an running as quickly as possible.</p>

<p>It's still a work in progress, with more features being added, and while the current build seems stable, bug reports are always apreciated!</p>


<section class="features">

    <h2>Features</h2>

    <section class="feature-box">
        <h4>MVC</h4>
        <p>Simple but useful MVC structure with optional scaffolding to auto-create models, controllers & even a simple JSON API for you. Models use Node-ORM so you’re not tied to a specific database.</p>
    </section>

    <section class="feature-box">
        <h4>Auto-routing</h4>
        <p>If your url’s follow the domain.com/controller/action/:id format, there’s no need to create any custom routing, it will just automatically load the controller/view if it’s found, and throw a 404 if it’s not.</p>
    </section>

    <section class="feature-box">
        <h4>Flexible Templates</h4>
        <p>You can choose from EJS, Handlebars, Hogan, Jade or Handlebars for templates. Less, Sass & Stylus are available for css pre-processors (with additional support for Bourbon, Axis & Nib libraries).</p>
    </section>

    <section class="feature-box">
        <h4>Boilerplates</h4>
        <p>Tesla uses a combination of npm and Bower to help create some useful boilerplates when setting up a new app. You can choose to have Tesla add things like jQuery, AngularJS, Foundation, etc. to your view templates automatically when it creates the project.</p>
    </section>

    <section class="feature-box">
        <h4>Auto-watch & LiveReload</h4>
        <p>Tesla utilizes the Grunt task runner to watch for file changes, restarting the server when necessary. It also comes with LiveReload out of the box to auto refresh your browser when files change.</p>
    </section>

    <section class="feature-box">
        <h4>Easy Configuration</h4>
        <p>Almost all of the server settings (port number, database settings, etc.) can be easily updated in the config file.</p>
    </section>

</section>

<div>

<a class="top-link" href="#home">back to top</a>
<h2 id="installation">Installation</h2>


<h4 id="prerequisites">Prerequisites:</h4>

<p><a href="http://nodejs.org/">Node.js</a> &amp; <a href="https://npmjs.org/">NPM</a> are the only absolute requirements, but it's highly recommended that you install <a href="http://gruntjs.com/">Grunt</a> as well:</p>

<pre class="code"><code>$ npm install -g grunt-cli
</code></pre>

<p>While it's not required, Tesla is configured to use Grunt for the majority of it's tasks. If you have any trouble installing it, refer to the <a href="http://gruntjs.com/getting-started#installing-the-cli">Grunt documentation</a> for help.</p>

<h4 id="installing-tesla">Install Tesla</h4>

<p>Once you have NPM up &amp; running, getting Tesla installed is pretty painless:</p>

<pre class="code"><code>$ npm install tesla-cli -g
</code></pre>

<a class="top-link" href="#home">back to top</a>
<h2 id="quick-start">Quick Start</h2>


<p>Now that you have the command-line tool installed, you can create your first app:</p>

<pre class="code"><code>$ tesla mysite
</code></pre>

<p>This will create a new barebones site with the name "mysite". Next, install dependencies:</p>

<pre class="code"><code>$ cd mysite &amp;&amp; npm install
</code></pre>

<p>Start the server:</p>

<pre class="code"><code>$ grunt
</code></pre>

<p>Once the server has started, simply point your browser to: <a href="http://localhost:3000">http://localhost:3000</a></p>

<p>If you choose not to use Grunt, you can start the server by running <code>node server.js</code>. But using Grunt gives you some extras such as livereload, and watching for changes your files &amp; restarting the server whenever necesary.</p>

<a class="top-link" href="#home">back to top</a>
<h2 id="setup-options">Setup Options</h2>


<a class="top-link" href="#home">back to top</a>
<h3 id="basic-settings">Basic Settings</h3>

<p>As you've seen, firing up a basic barebones site is pretty easy, but it's also a bit boring. Tesla is a lot more powerful than that, and it comes with a number of options that lets you create a boilerplate site with much more useful features</p>


<a class="top-link" href="#home">back to top</a>
<h5 id="mvc-scaffolding">MVC Scaffolding</h5>

<p>Tesla includes a generator that will do the dirty work of creting &amp; linking controllers, models &amp; views for you. Let's say you have a databse of users that you want to interact with:</p>

<pre class="code"><code>$ tesla generate user
</code></pre>

<p>This one command will give you basic CRUD functionality via a very simple JSON api. See the <a href="#working-with-data">working with data</a> section for more info on scaffolding as well as working with models, controllers &amp; views.</p>

<a class="top-link" href="#home">back to top</a>
<h5 id="html-templating-engines">HTML templating engines</h5>

<p>By default, Tesla use Jade for HTML templates, but it supports 5 different templating languages: </p>

<p>Options:</p>

<ul>
<li><code class="code-inline">--html ejs</code> <a href="http://embeddedjs.com/">EJS</a> - uses <a href="https://npmjs.org/package/ejs">ejs</a> npm package</li>
<li><code class="code-inline">--html handlebars</code> <a href="http://handlebarsjs.com/">Handlebars</a> - uses <a href="https://npmjs.org/package/hbs">hbs</a> npm package</li>
<li><code class="code-inline">--html hogan</code> <a href="http://twitter.github.io/hogan.js/">Hogan.js</a> - uses <a href="https://npmjs.org/package/hogan-middleware">hogan-middleware</a> npm package</li>
<li><code class="code-inline">--html jade</code> <a href="http://jade-lang.com/">Jade</a> (default) - uses <a href="https://npmjs.org/package/jade">jade</a> npm package</li>
<li><code class="code-inline">--html mustache</code> <a href="http://mustache.github.io/">Mustache</a> - uses <a href="https://npmjs.org/package/mustache-express">mustache-express</a> npm package</li>
</ul>

<p>Example:</p>

<pre class="code"><code>$ tesla myapp --html handlebars
</code></pre>

<a class="top-link" href="#home">back to top</a>
<h5 id="css-pre-processors">CSS pre-processors</h5>

<p>The default setting will just use plain ol' regular CSS. But if you want to use a css preprocessor, you have three options:</p>

<p><strong>Options:</strong></p>

<ul>
<li><code class="code-inline">--css less</code> <a href="http://lesscss.org/">Less</a> - uses <a href="https://npmjs.org/package/less">less</a> npm package</li>
<li><code class="code-inline">--css sass</code> <a href="http://sass-lang.com/">Sass</a> - uses <a href="https://npmjs.org/package/sass">sass</a> npm package</li>
<li><code class="code-inline">--css stylus</code> <a href="http://learnboost.github.io/stylus/">Stylus</a> - uses <a href="https://npmjs.org/package/stylus">stylus</a> npm package</li>
</ul>

<p><strong>Example:</strong></p>

<pre class="code"><code>$ tesla myapp --css stylus
</code></pre>

<a class="top-link" href="#home">back to top</a>
<h5 id="css-helper-libraries">CSS helper libraries</h5>

<p><strong>Options:</strong></p>

<ul>
<li><code class="code-inline">--axis</code> <a href="http://roots.cx/axis/">Axis</a> for Stylus - uses <a href="https://npmjs.org/package/axis">axis</a> npm package</li>
<li><code class="code-inline">--bourbon</code> <a href="http://bourbon.io/">Bourbon</a> for Sass - uses <a href="https://npmjs.org/package/node-bourbon">node-bourbon</a> npm package</li>
<li><code class="code-inline">--nib</code> <a href="http://visionmedia.github.io/nib/">Nib</a> for Stylus - uses <a href="https://npmjs.org/package/nib">nib</a> npm package</li>
</ul>

<a class="top-link" href="#home">back to top</a>
<h3 id="front-end-tools">Front-End Tools</h3>

<p>Tesla utilizes Bower to let you quickly add many of your favorite front-end tools such as jQuery, Angular or Bootstrap. If you select any of these options, the package(s) will be added to your bower file, and any javascript or css dependencies will automatically added to the default views.</p>

<a class="top-link" href="#home">back to top</a>
<h5 id="javascript-application-frameworks">JavaScript Application Frameworks</h5>

<p><strong>Options:</strong></p>

<ul>
<li><code class="code-inline">--angular</code> <a href="http://angularjs.org/">AngularJS</a></li>
<li><code class="code-inline">--backbone</code> <a href="http://backbonejs.org/">Backbone.js</a></li>
<li><code class="code-inline">--ember</code> <a href="http://emberjs.com/">Ember.js</a></li>
</ul>

<p><strong>Example:</strong></p>

<pre class="code"><code>$ tesla myapp --backbone
</code></pre>

<a class="top-link" href="#home">back to top</a>
<h5 id="javascript-libraries">JavaScript Libraries</h5>

<p><strong>Options:</strong></p>

<ul>
<li><code class="code-inline">--jquery</code> <a href="http://angularjs.org/">AngularJS</a></li>
<li><code class="code-inline">--mootools</code> <a href="http://mootools.net/">MooTools</a></li>
<li><code class="code-inline">--zepto</code> <a href="http://zeptojs.com/">Zepto.js</a></li>
</ul>

<p><strong>Example:</strong></p>

<pre class="code"><code>$ tesla myapp --zepto
</code></pre>

<a class="top-link" href="#home">back to top</a>
<h5 id="css-frameworks">CSS Frameworks</h5>

<p><strong>Options:</strong></p>

<ul>
<li><code class="code-inline">--bootstrap</code> <a href="http://getbootstrap.com/">Bootstrap</a></li>
<li><code class="code-inline">--foundation</code> <a href="http://foundation.zurb.com/">Foundation</a></li>
<li><code class="code-inline">--gumby</code> <a href="http://gumbyframework.com/">Gumby</a></li>
<li><code class="code-inline">--skeleton</code> <a href="http://www.getskeleton.com/">Skeleton</a></li>
</ul>

<p><strong>Example:</strong></p>

<pre class="code"><code>$ tesla myapp --gumby
</code></pre>

<a class="top-link" href="#home">back to top</a>
<h3 id="real-world-examples">Real World Examples:</h3>

<p>You can combine any number of the above options to customize your application to your liking:</p>

<p><strong>Example 01: Create an app called foobar that uses EJS, Sass, AngularJS, &amp; jQuery</strong></p>

<pre class="code"><code>$ tesla foobar --html ejs --css sass --angular --jquery
</code></pre>

<p><strong>Example 02: Create an app called coil using Handlebars, Stylus, Axis, Foundation, Ember &amp; jQuery</strong></p>

<pre class="code"><code>$ tesla coil --html handlebars --css stylus --axis --foundation --ember --jquery
</code></pre>

<h4 id="all-tesla-cli-options">All Tesla CLI Options:</h4>

<p>Below is a reference listing all of the available options for the command-line tool:</p>

<pre class="code">Usage: tesla [options]

Options:

// BASIC SETTINGS
-H, --html &lt;engine&gt;  templating engine: (ejs|handlebars|hogan|jade|mustache) (defaults to Jade)
-C, --css &lt;engine&gt;   add stylesheet support (less|sass|stylus) (defaults to vanilla css)
-V, --version        output the version number
-F, --force          force on non-empty directory

// PRE-PROCESSOR LIBRARIES
--axis               add Axis support for Stylus
--bourbon            add Bourbon support for Sass
--nib                add Nib support for Stylus

// FE FRAMEWORKS
--angular            add support for AngularJS
--backbone           add support for BACKBONE.JS
--ember              add support for Ember.js

// JS LIBRARIES
--jquery             add support for jQuery
--mootools           add support for MooTools
--zepto              add support for Zepto.js

// CSS FRAMEWORKS
--bootstrap          add support for Bootstrap
--foundation         add support for Foundation
--gumby              add support for Gumby
--skeleton           add support for Skeleton

// OTHER SETTINGS
generate &lt;name&gt;      generate new model + controller with basic CRUD functionality
start                start the web server (still a bit buggy, best just just run "grunt" for now)
</pre>

<a class="top-link" href="#home">back to top</a>
<h2 id="configuration">Configuration</h2>


<p>All configuration for Tesla is specified in the <a href="config/">config</a> folder, particularly the <a href="config/config.js">config.js</a> file and the <a href="config/env/">env</a> files. This is where you will need to specify your application name, database connection, and any other settings you would like to customize.</p>

<a class="top-link" href="#home">back to top</a>
<h5 id="efault-config-file">Default config file: <a href="config/config.js">config.js</a></h5>

<p>Most default settings can be set &amp; updated here:</p>

<pre class="code"><code>app.site = {
    name : "tesla.js", // the name of you app
}

app.config = {
    port : 3000, // port to run the server on

    prettify : {
        html : true, // whether to pretify html
        css : true, // whether to pretify css
        js : true // whether to pretify js
    },

    cache : false, // whether to use caching

    api : {
        enabled : true, // set false to disable json output for scafolding
        format : 'json', // format to output in api views
        access : '*' // placeholder for future api security enhancement
    },

    engines : {
        html: "jade", // options: (ejs|handlebars|hogan|jade|mustache)
        css: "stylus", // options: (stylus|sass|less) - set false to just use vanilla css
        cssLibrary: false, // options: (axis|bourbon|nib) - set to false for none
    },

    root : rootPath, // path to the root of your server

    // see https://github.com/dresende/node-orm2/wiki/Connecting-to-Database for more info on connection to your databse
    db : {
        url : "driver://username:password@hostname/database", // url to database
        driver: "mongodb" // which db driver to use
    },

    jsonp : true, // allow jsonp requests
    secret : 'MYAPPSECRET', // placeholder for now, will be implemented later
    protocol : 'http://', // options: (http|https)
    autoLoad : true, // whether to attempt autoload controllers
    publicDir : './public', // public directory where images, javascript, css, etc is stored

    logging : {
        console: true, // whether to allow tesla to log messages to the node console
        files: false // this doesn't do anything yet
    }
}
</code></pre>

<a class="top-link" href="#home">back to top</a>
<h3 id="environmental-settings">Environmental Settings</h3>

<p>To run with a different environment, just specify NODE_ENV as you call grunt:</p>

<pre class="code"><code>$ NODE_ENV=test grunt
</code></pre>

<p>If you are using node instead of grunt, it is very similar:</p>

<pre class="code"><code>$ NODE_ENV=test node server
</code></pre>

<a class="top-link" href="#home">back to top</a>
<h5 id="development-environment-example">Example config file for "development" environment: <a href="config/env/development.js">config/env/development.js</a></h5>

<pre class="code"><code>// global settings
app.site.domain = "localhost"; // domain the site is running on
app.site.environment = "Development"; // name of environment
app.site.url = app.config.protocol + app.site.domain + ':'  + app.config.port + '/'; // base url

// directories location to use for dynamic file linking
app.site.dir = {
    css : app.site.url + "css/",
    img : app.site.url + "img/",
    lib : app.site.url + "lib/",
    js : app.site.url + "js/"
};
</code></pre>

<a class="top-link" href="#home">back to top</a>
<h2 id="routing">Routing</h2>


<p>Tesla comes with an automatic routing system which should save you the trouble of manually creating routes for your site 99% of the time. The routing is based on the following URI structure:</p>

<pre class="code"><code>http://localhost:3000/controller/action/:id
</code></pre>

<p>Let's say you called the following url:</p>

<pre class="code"><code>http://localhost:3000/foo/bar
</code></pre>

<p>The router will attempt to find a matching controller in this order:</p>

<ol>
<li>app/controllers/fooController.js</li>
<li>app/controllers/foo/indexController.js</li>
<li>app/controllers/foo/barController.js </li>
</ol>

<p>If it does not find a matching controller, the router will throw a 404 error.</p>

<p>You are of course free to create your own custom routes if the default url scheme doesn't work for your site.</p>

<a class="top-link" href="#home">back to top</a>
<h2 id="working-with-data">Working with data</h2>


<p>Creating models &amp; working with data in Tesla is super simple. It takes only 2 steps:</p>

<p>1) To work with data, make sure you set the URL for your database (config.db.url) in the <a href="https://github.com/teslajs/tesla.js/blob/master/config/config.js">config file</a>.</p>

<p>2) Generate new model: let's say you have a collection called "user" you want to use with your app, all you need to do is run the following command:</p>

<pre class="code"><code>$ tesla generate user
</code></pre>

<p>this will create 2 new files for you:
- app/models/user.js
- app/controllers/userController.js</p>

<h4 id="models">Models</h4>

<p>As long as your databse URL is set properly, this is all you need to do. However, you will almost certainly want to open up your new model and define the schema for your collection or table.</p>

<p>In this file, you will see a block that looks something like this:</p>

<pre class="code"><code>// DEFINE MODEL SCHEMA
// Be sure to add some files to the schema below or you will not have success quering or adding to the database
var Model = db.define("user", {
    created   : { type: "date", time: true },
    updated   : { type: "date", time: true }
    // _id : { type: "text" },
    // name      : { type: "text", required: true },
    // isAdmin : { type: "boolean", defaultValue: false },
}, {
    validations: {
        // EXAMPLE VALIDATIONS
        // password: orm.enforce.security.password('luns5', 'Passowrd does not meet min security requirements.'),
        // email: orm.enforce.patterns.email('Please enter a valid email address.')
        // More Options : https://github.com/dresende/node-enforce
    }
});
</code></pre>

<p>Here you will want to define what fields you want to be able to read/update in the collection. In the example above, this model only has access to "created" and "updated" fields. But it's almost certain that you will need to add more fields than this. There are a few commented out examples included to get you started.</p>

<p>Tesla uses <a href="https://github.com/dresende/node-orm2">Node-ORM</a> to provide add basic ORM functionality. For more info on definifing models &amp; validations,<a href="https://github.com/dresende/node-orm2/wiki">have a look at the ORM wiki</a>.</p>

<p>Once you have your schema setup, that should be about all you need to with the model do in most cases. But feel free to muck about further down in the file if you need to do some more customization.</p>

<h4 id="controllers">Controllers</h4>

<p>By default, Tesla will serve up your data via a RESTful JSON api. If this is the result you want, you shouldn't need to make any changes to the generated controller. You get the following URI scheme by default:</p>

<pre class="code"><code>http://localhost:3000/user/all
http://localhost:3000/user/create?data&amp;goes&amp;here
http://localhost:3000/user/delete/:id
http://localhost:3000/user/find?query&amp;terms&amp;here
http://localhost:3000/user/update/:id
</code></pre>

<p>It's worth noting that delete &amp; update require to pass the databse ID, while create &amp; find accept arguments via GET parameters. Create maps each GET parameter to a field in the databse (POST/PUT support will come in the next iteration). For example, if you want add the following data to your collection/table:</p>

<pre class="code"><code>name: Bob
email: bob@marley.com
</code></pre>

<p>you would simple enter this into the browser:</p>

<pre class="code"><code>http://localhost:3000/user/create?name=Bob&amp;email=bob@marley.com
</code></pre>

<p>Similarly, if you want to retrieve all the records of people names Bob, you would build a request like this:</p>

<pre class="code"><code>http://localhost:3000/user/find?name=Bob
</code></pre>

<p>and you will get back something like this:</p>

<pre class="code"><code>[
    {
        name: "Bob"
        email: "bob@marley.com"
    },
    {
        name: "Bob"
        email: "bob@dylan.com"
    }
]
</code></pre>

<p>Now, if you would rather serve up a proper HTML view, it's a simple change, just open up your <a href="">config file</a> and set "config.api.enabled" to "false". Now, it will map the request to the appropriate view. By default, you get 5 (all, create, delete, find, update) views. Continuing with our user example, you will get the following url > view mapping:</p>

<pre class="code"><code>http://localhost:3000/user/all  &gt;  app/views/all
http://localhost:3000/user/create?data&amp;goes&amp;here  &gt;  app/views/create
http://localhost:3000/user/delete/:id  &gt;  app/views/delete
http://localhost:3000/user/find?query&amp;terms&amp;here  &gt;  app/views/find
http://localhost:3000/user/update/:id  &gt;  app/views/update
</code></pre>

<p>These are all setup in the controller, however you will need to create the appropriate view files or you will get a 404 error. The data from each request (which was previously spit out as a JSON view) will be sent to the view as an object called "data".</p>

<a class="top-link" href="#home">back to top</a>
<h2 id="views">Views</h2>


<p>Views can use Jade (default), Haml, Handlebars or EJS (though I've only tested with Jade so far). See the appropriate documentation for your chosen templating language for more info on how to use it.</p>

<a class="top-link" href="#home">back to top</a>
<h2 id="troubleshooting">Troubleshooting</h2>


<p>During install some of you may encounter some issues, most of this issues can be solved by one of the following tips.
If you went through all this and still can't solve the issue, feel free to contact me(Amos), via the repository issue tracker or the links provided below.</p>

<h4 id="update-npm-bower-or-grunt">Update NPM, Bower or Grunt</h4>

<p>Sometimes you may find there is a weird error during install like npm's <em>Error: ENOENT</em>, usually updating those tools to the latest version solves the issue.</p>

<p>Updating NPM:</p>

<pre class="code"><code>$ npm update -g npm
</code></pre>

<p>Updating Grunt:</p>

<pre class="code"><code>$ npm update -g grunt-cli
</code></pre>

<p>Updating Bower:</p>

<pre class="code"><code>$ npm update -g bower
</code></pre>

<h4 id="cleaning-npm-and-bower-cache">Cleaning NPM and Bower cache</h4>

<p>NPM and Bower has a caching system for holding packages that you already installed.
We found that often cleaning the cache solves some troubles this system creates.</p>

<p>NPM Clean Cache:</p>

<pre class="code"><code>$ npm cache clean
</code></pre>

<p>Bower Clean Cache:</p>

<pre class="code"><code>$ bower cache clean
</code></pre>

<a class="top-link" href="#home">back to top</a>
<h2 id="heroku-quick-deployment">Heroku Quick Deployment</h2>


<p>Before you start make sure you have <a href="https://toolbelt.heroku.com/">heroku toolbelt</a> installed and an accessible mongo db instance - you can try <a href="http://www.mongohq.com/">mongohq</a> which have an easy setup )</p>

<pre class="code"><code class="bash">git init
git add .
git commit -m "initial version"
heroku apps:create
git push heroku master
</code></pre>

<a class="top-link" href="#home">back to top</a>
<h2 id="credits">Credits</h2>


<strong>Developed by:</strong> <a href="http://github.com/jesseweed">Jesse Weed</a>

<br>

<strong>Inspired by:</strong> <a href="https://github.com/visionmedia/express">Express</a>, <a href="http://sailsjs.org">Sails.js</a> and <a href="https://github.com/linnovate/meana">MEAN</a>.

<br><br>

<p><a href="https://bitdeli.com/free" title="Bitdeli Badge"><img src="https://d2weczhvl823v0.cloudfront.net/teslajs/tesla.js/trend.png" alt="Bitdeli Badge" title="" /></a></p>


</div>


<section>

{{> footer}}